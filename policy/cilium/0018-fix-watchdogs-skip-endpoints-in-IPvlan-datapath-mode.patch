From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: l1b0k <libokang.lbk@alibaba-inc.com>
Date: Tue, 13 Jan 2026 13:45:06 +0800
Subject: fix(watchdogs): skip endpoints in IPvlan datapath mode

Signed-off-by: l1b0k <libokang.lbk@alibaba-inc.com>
---
 daemon/cmd/watchdogs.go | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/daemon/cmd/watchdogs.go b/daemon/cmd/watchdogs.go
index e3f21e4fa6..af08fc53e8 100644
--- a/daemon/cmd/watchdogs.go
+++ b/daemon/cmd/watchdogs.go
@@ -6,6 +6,8 @@ package cmd
 import (
 	"context"
 
+	datapathOption "github.com/cilium/cilium/pkg/datapath/option"
+	"github.com/cilium/cilium/pkg/option"
 	"github.com/cilium/hive/cell"
 	"github.com/sirupsen/logrus"
 	"github.com/spf13/pflag"
@@ -108,6 +110,10 @@ func (d *Daemon) checkEndpointBPFPrograms(ctx context.Context, p epBPFProgWatchd
 			continue
 		}
 
+		if option.Config.DatapathMode == datapathOption.DatapathModeIPvlan {
+			continue
+		}
+
 		if ep.HostInterface() == "" {
 			continue
 		}
-- 
2.50.1 (Apple Git-155)

